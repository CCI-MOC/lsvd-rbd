+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
===Starting client benchmark

+ printf '===Starting client benchmark\n\n'
+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
Using device /dev/nvme1n1
+ dev_name=/dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.356046 s, 295 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: aa2e5588-63a8-49ea-9ba7-8ebb500ed4fa
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.004: File-server Version 3.0 personality successfully loaded
0.004: Populating and pre-allocating filesets
0.276: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.276: Removing bigfileset tree (if exists)
0.279: Pre-allocating directories in bigfileset tree
0.676: Pre-allocating files in bigfileset tree
36.773: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
36.773: Population and pre-allocation of filesets completed
36.774: Starting 1 filereader instances
37.782: Running...
217.798: Run took 180 seconds...
217.802: Per-Operation Breakdown
statfile1            1228062ops     6822ops/s   0.0mb/s    0.012ms/op [0.003ms - 2.190ms]
deletefile1          1228063ops     6822ops/s   0.0mb/s    0.204ms/op [0.030ms - 73.019ms]
closefile3           1228063ops     6822ops/s   0.0mb/s    0.005ms/op [0.001ms - 229.263ms]
readfile1            1228063ops     6822ops/s 897.9mb/s    0.103ms/op [0.004ms - 66.854ms]
openfile2            1228063ops     6822ops/s   0.0mb/s    0.077ms/op [0.006ms - 341.948ms]
closefile2           1228063ops     6822ops/s   0.0mb/s    0.004ms/op [0.001ms - 9.664ms]
appendfilerand1      1228063ops     6822ops/s  53.3mb/s    0.390ms/op [0.001ms - 202.746ms]
openfile1            1228068ops     6822ops/s   0.0mb/s    0.082ms/op [0.007ms - 363.828ms]
closefile1           1228068ops     6822ops/s   0.0mb/s    0.006ms/op [0.001ms - 312.572ms]
wrtfile1             1228073ops     6822ops/s 854.2mb/s    5.184ms/op [0.013ms - 211.200ms]
createfile1          1228112ops     6822ops/s   0.0mb/s    0.149ms/op [0.023ms - 612.468ms]
217.802: IO Summary: 13508761 ops 75042.321 ops/s 6822/13644 rd/wr 1805.5mb/s 0.565ms/op
217.802: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:217.802: IO Summary: 13508761 ops 75042.321 ops/s 6822/13644 rd/wr 1805.5mb/s 0.565ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: OLTP Version 3.0  personality successfully loaded
0.003: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.006: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.163: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.163: Removing datafiles tree (if exists)
0.166: Pre-allocating directories in datafiles tree
0.166: Pre-allocating files in datafiles tree
37.135: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
37.135: Population and pre-allocation of filesets completed
37.135: Starting 200 shadow instances
37.260: Starting 10 dbwr instances
37.266: Starting 1 lgwr instances
38.269: Running...
218.317: Run took 180 seconds...
218.336: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     4716000ops    26193ops/s   0.0mb/s    6.065ms/op [0.019ms - 268.925ms]
shadow-post-lg       4716084ops    26194ops/s   0.0mb/s    0.076ms/op [0.002ms - 80.504ms]
shadowhog            4716086ops    26194ops/s   0.0mb/s    0.330ms/op [0.091ms - 149.024ms]
shadowread           4741790ops    26337ops/s  51.2mb/s    1.041ms/op [0.001ms - 128.595ms]
dbwr-aiowait         47154ops      262ops/s   0.0mb/s    2.127ms/op [0.005ms - 61.348ms]
dbwr-block           47156ops      262ops/s   0.0mb/s   20.736ms/op [0.003ms - 66.365ms]
dbwr-hog             47164ops      262ops/s   0.0mb/s    0.011ms/op [0.004ms - 18.328ms]
dbwrite-a            4717680ops    26203ops/s  51.2mb/s    0.003ms/op [0.000ms - 81.482ms]
lg-block             1473ops        8ops/s   0.0mb/s  122.110ms/op [35.132ms - 702.791ms]
lg-aiowait           1474ops        8ops/s   0.0mb/s    0.001ms/op [0.000ms - 0.022ms]
lg-write             1475ops        8ops/s   2.0mb/s    0.009ms/op [0.001ms - 0.108ms]
218.336: IO Summary: 9509573 ops 52817.424 ops/s 26337/26211 rd/wr 104.4mb/s 0.531ms/op
218.336: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:218.336: IO Summary: 9509573 ops 52817.424 ops/s 26337/26211 rd/wr 104.4mb/s 0.531ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: Varmail Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.958: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
0.958: Removing bigfileset tree (if exists)
0.961: Pre-allocating directories in bigfileset tree
0.961: Pre-allocating files in bigfileset tree
79.987: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
79.987: Population and pre-allocation of filesets completed
79.987: Starting 1 filereader instances
80.992: Running...
261.008: Run took 180 seconds...
261.009: Per-Operation Breakdown
closefile4           365157ops     2028ops/s   0.0mb/s    0.003ms/op [0.001ms - 0.474ms]
readfile4            365157ops     2028ops/s  52.5mb/s    0.622ms/op [0.005ms - 217.940ms]
openfile4            365157ops     2028ops/s   0.0mb/s    0.022ms/op [0.005ms - 3.918ms]
closefile3           365157ops     2028ops/s   0.0mb/s    0.006ms/op [0.001ms - 1.706ms]
fsyncfile3           365158ops     2028ops/s   0.0mb/s    2.352ms/op [0.229ms - 212.513ms]
appendfilerand3      365162ops     2029ops/s  15.8mb/s    0.105ms/op [0.007ms - 21.580ms]
readfile3            365162ops     2029ops/s  52.6mb/s    0.660ms/op [0.005ms - 209.452ms]
openfile3            365163ops     2029ops/s   0.0mb/s    0.022ms/op [0.005ms - 1.720ms]
closefile2           365163ops     2029ops/s   0.0mb/s    0.006ms/op [0.001ms - 3.587ms]
fsyncfile2           365166ops     2029ops/s   0.0mb/s    2.462ms/op [0.732ms - 212.499ms]
appendfilerand2      365172ops     2029ops/s  15.9mb/s    0.258ms/op [0.001ms - 215.309ms]
createfile2          365173ops     2029ops/s   0.0mb/s    0.597ms/op [0.032ms - 215.537ms]
deletefile1          365173ops     2029ops/s   0.0mb/s    0.634ms/op [0.043ms - 218.804ms]
261.009: IO Summary: 4747120 ops 26370.580 ops/s 4057/4057 rd/wr 136.8mb/s 0.596ms/op
261.009: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:261.009: IO Summary: 4747120 ops 26370.580 ops/s 4057/4057 rd/wr 136.8mb/s 0.596ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:217.802: IO Summary: 13508761 ops 75042.321 ops/s 6822/13644 rd/wr 1805.5mb/s 0.565ms/op
Filebench /tmp/filebench/oltp.f:218.336: IO Summary: 9509573 ops 52817.424 ops/s 26337/26211 rd/wr 104.4mb/s 0.531ms/op
Filebench /tmp/filebench/varmail.f:261.009: IO Summary: 4747120 ops 26370.580 ops/s 4057/4057 rd/wr 136.8mb/s 0.596ms/op
