+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
===Starting client benchmark

+ printf '===Starting client benchmark\n\n'
+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
Using device /dev/nvme1n1
+ dev_name=/dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.450625 s, 233 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: 3ee0f3d0-8b7f-42f8-91f8-99c673fdd207
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: File-server Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.207: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.207: Removing bigfileset tree (if exists)
0.210: Pre-allocating directories in bigfileset tree
0.613: Pre-allocating files in bigfileset tree
46.677: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
46.677: Population and pre-allocation of filesets completed
46.678: Starting 1 filereader instances
47.685: Running...
227.703: Run took 180 seconds...
227.707: Per-Operation Breakdown
statfile1            686161ops     3812ops/s   0.0mb/s    0.012ms/op [0.003ms - 15.053ms]
deletefile1          686155ops     3812ops/s   0.0mb/s    0.278ms/op [0.031ms - 273.565ms]
closefile3           686161ops     3812ops/s   0.0mb/s    0.005ms/op [0.001ms - 14.632ms]
readfile1            686161ops     3812ops/s 498.2mb/s    0.118ms/op [0.005ms - 290.514ms]
openfile2            686161ops     3812ops/s   0.0mb/s    0.075ms/op [0.006ms - 52.413ms]
closefile2           686161ops     3812ops/s   0.0mb/s    0.005ms/op [0.001ms - 16.522ms]
appendfilerand1      686161ops     3812ops/s  29.8mb/s    0.788ms/op [0.001ms - 317.429ms]
openfile1            686166ops     3812ops/s   0.0mb/s    0.083ms/op [0.007ms - 50.165ms]
closefile1           686166ops     3812ops/s   0.0mb/s    0.007ms/op [0.001ms - 15.384ms]
wrtfile1             686168ops     3812ops/s 476.9mb/s   10.310ms/op [0.013ms - 370.452ms]
createfile1          686210ops     3812ops/s   0.0mb/s    0.182ms/op [0.024ms - 124.801ms]
227.707: IO Summary: 7547831 ops 41928.523 ops/s 3812/7623 rd/wr 1004.9mb/s 1.078ms/op
227.707: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:227.707: IO Summary: 7547831 ops 41928.523 ops/s 3812/7623 rd/wr 1004.9mb/s 1.078ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: OLTP Version 3.0  personality successfully loaded
0.003: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.006: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.125: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.125: Removing datafiles tree (if exists)
0.128: Pre-allocating directories in datafiles tree
0.128: Pre-allocating files in datafiles tree
57.861: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
57.861: Population and pre-allocation of filesets completed
57.862: Starting 200 shadow instances
57.992: Starting 10 dbwr instances
57.997: Starting 1 lgwr instances
59.022: Running...
239.072: Run took 180 seconds...
239.091: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     4139000ops    22988ops/s   0.0mb/s    7.214ms/op [0.019ms - 626.605ms]
shadow-post-lg       4139194ops    22989ops/s   0.0mb/s    0.069ms/op [0.002ms - 59.983ms]
shadowhog            4139194ops    22989ops/s   0.0mb/s    0.310ms/op [0.093ms - 140.182ms]
shadowread           4164798ops    23132ops/s  44.9mb/s    1.016ms/op [0.001ms - 205.832ms]
dbwr-aiowait         41378ops      230ops/s   0.0mb/s    2.236ms/op [0.004ms - 57.557ms]
dbwr-block           41382ops      230ops/s   0.0mb/s   18.819ms/op [0.003ms - 613.825ms]
dbwr-hog             41388ops      230ops/s   0.0mb/s    0.011ms/op [0.004ms - 16.470ms]
dbwrite-a            4140080ops    22994ops/s  44.9mb/s    0.004ms/op [0.000ms - 57.956ms]
lg-block             1293ops        7ops/s   0.0mb/s  139.143ms/op [26.331ms - 1072.667ms]
lg-aiowait           1294ops        7ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.026ms]
lg-write             1295ops        7ops/s   1.8mb/s    0.009ms/op [0.001ms - 0.125ms]
239.091: IO Summary: 8348845 ops 46370.164 ops/s 23132/23002 rd/wr  91.6mb/s 0.520ms/op
239.091: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:239.091: IO Summary: 8348845 ops 46370.164 ops/s 23132/23002 rd/wr  91.6mb/s 0.520ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: Varmail Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.952: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
0.952: Removing bigfileset tree (if exists)
0.954: Pre-allocating directories in bigfileset tree
0.954: Pre-allocating files in bigfileset tree
79.438: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
79.438: Population and pre-allocation of filesets completed
79.438: Starting 1 filereader instances
80.442: Running...
260.459: Run took 180 seconds...
260.460: Per-Operation Breakdown
closefile4           321434ops     1786ops/s   0.0mb/s    0.003ms/op [0.001ms - 1.361ms]
readfile4            321434ops     1786ops/s  47.1mb/s    0.693ms/op [0.005ms - 497.372ms]
openfile4            321434ops     1786ops/s   0.0mb/s    0.023ms/op [0.005ms - 4.813ms]
closefile3           321434ops     1786ops/s   0.0mb/s    0.006ms/op [0.001ms - 2.909ms]
fsyncfile3           321443ops     1786ops/s   0.0mb/s    2.769ms/op [0.142ms - 562.720ms]
appendfilerand3      321446ops     1786ops/s  13.9mb/s    0.084ms/op [0.001ms - 209.342ms]
readfile3            321446ops     1786ops/s  47.0mb/s    0.743ms/op [0.005ms - 371.145ms]
openfile3            321446ops     1786ops/s   0.0mb/s    0.022ms/op [0.005ms - 6.563ms]
closefile2           321446ops     1786ops/s   0.0mb/s    0.006ms/op [0.001ms - 1.458ms]
fsyncfile2           321448ops     1786ops/s   0.0mb/s    2.902ms/op [0.775ms - 503.345ms]
appendfilerand2      321450ops     1786ops/s  14.0mb/s    0.267ms/op [0.015ms - 326.927ms]
createfile2          321450ops     1786ops/s   0.0mb/s    0.630ms/op [0.032ms - 327.155ms]
deletefile1          321450ops     1786ops/s   0.0mb/s    0.674ms/op [0.044ms - 497.768ms]
260.460: IO Summary: 4178761 ops 23213.254 ops/s 3571/3571 rd/wr 122.0mb/s 0.679ms/op
260.460: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:260.460: IO Summary: 4178761 ops 23213.254 ops/s 3571/3571 rd/wr 122.0mb/s 0.679ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:227.707: IO Summary: 7547831 ops 41928.523 ops/s 3812/7623 rd/wr 1004.9mb/s 1.078ms/op
Filebench /tmp/filebench/oltp.f:239.091: IO Summary: 8348845 ops 46370.164 ops/s 23132/23002 rd/wr  91.6mb/s 0.520ms/op
Filebench /tmp/filebench/varmail.f:260.460: IO Summary: 4178761 ops 23213.254 ops/s 3571/3571 rd/wr 122.0mb/s 0.679ms/op
