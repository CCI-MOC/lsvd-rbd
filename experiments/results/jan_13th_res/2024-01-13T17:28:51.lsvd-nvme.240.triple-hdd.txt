+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
+ printf '===Starting client benchmark\n\n'
===Starting client benchmark

+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
Using device /dev/nvme1n1
+ dev_name=/dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.481255 s, 218 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: 9f5ac485-7b40-463f-95f6-5366127aeccf
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: File-server Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.208: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.208: Removing bigfileset tree (if exists)
0.210: Pre-allocating directories in bigfileset tree
0.609: Pre-allocating files in bigfileset tree
44.676: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
44.676: Population and pre-allocation of filesets completed
44.676: Starting 1 filereader instances
45.685: Running...
225.703: Run took 180 seconds...
225.709: Per-Operation Breakdown
statfile1            692118ops     3845ops/s   0.0mb/s    0.012ms/op [0.004ms - 15.993ms]
deletefile1          692115ops     3845ops/s   0.0mb/s    0.258ms/op [0.030ms - 296.271ms]
closefile3           692120ops     3845ops/s   0.0mb/s    0.004ms/op [0.001ms - 11.959ms]
readfile1            692120ops     3845ops/s 502.2mb/s    0.112ms/op [0.004ms - 275.675ms]
openfile2            692120ops     3845ops/s   0.0mb/s    0.053ms/op [0.005ms - 234.815ms]
closefile2           692120ops     3845ops/s   0.0mb/s    0.004ms/op [0.001ms - 9.907ms]
appendfilerand1      692120ops     3845ops/s  30.0mb/s    0.820ms/op [0.001ms - 307.541ms]
openfile1            692120ops     3845ops/s   0.0mb/s    0.059ms/op [0.007ms - 234.951ms]
closefile1           692121ops     3845ops/s   0.0mb/s    0.007ms/op [0.001ms - 9.808ms]
wrtfile1             692125ops     3845ops/s 481.0mb/s   10.746ms/op [0.013ms - 321.385ms]
createfile1          692168ops     3845ops/s   0.0mb/s    0.157ms/op [0.024ms - 234.718ms]
225.709: IO Summary: 7613367 ops 42292.630 ops/s 3845/7690 rd/wr 1013.3mb/s 1.112ms/op
225.709: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:225.709: IO Summary: 7613367 ops 42292.630 ops/s 3845/7690 rd/wr 1013.3mb/s 1.112ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: OLTP Version 3.0  personality successfully loaded
0.003: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.006: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.160: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.161: Removing datafiles tree (if exists)
0.163: Pre-allocating directories in datafiles tree
0.163: Pre-allocating files in datafiles tree
58.251: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
58.251: Population and pre-allocation of filesets completed
58.252: Starting 200 shadow instances
58.365: Starting 10 dbwr instances
58.370: Starting 1 lgwr instances
59.383: Running...
239.427: Run took 180 seconds...
239.447: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     4176000ops    23195ops/s   0.0mb/s    7.361ms/op [0.019ms - 507.351ms]
shadow-post-lg       4176195ops    23196ops/s   0.0mb/s    0.057ms/op [0.002ms - 77.353ms]
shadowhog            4176197ops    23196ops/s   0.0mb/s    0.288ms/op [0.091ms - 103.055ms]
shadowread           4201800ops    23338ops/s  45.3mb/s    0.830ms/op [0.001ms - 220.914ms]
dbwr-aiowait         41751ops      232ops/s   0.0mb/s    2.113ms/op [0.004ms - 54.195ms]
dbwr-block           41755ops      232ops/s   0.0mb/s   16.380ms/op [0.003ms - 238.688ms]
dbwr-hog             41761ops      232ops/s   0.0mb/s    0.010ms/op [0.004ms - 12.683ms]
dbwrite-a            4177380ops    23202ops/s  45.3mb/s    0.004ms/op [0.001ms - 61.486ms]
lg-block             1305ops        7ops/s   0.0mb/s  137.870ms/op [33.520ms - 1182.430ms]
lg-aiowait           1306ops        7ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.027ms]
lg-write             1307ops        7ops/s   1.8mb/s    0.009ms/op [0.001ms - 0.098ms]
239.447: IO Summary: 8423544 ops 46786.679 ops/s 23338/23210 rd/wr  92.4mb/s 0.426ms/op
239.447: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:239.447: IO Summary: 8423544 ops 46786.679 ops/s 23338/23210 rd/wr  92.4mb/s 0.426ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: Varmail Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.975: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
0.975: Removing bigfileset tree (if exists)
0.977: Pre-allocating directories in bigfileset tree
0.977: Pre-allocating files in bigfileset tree
81.486: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
81.486: Population and pre-allocation of filesets completed
81.486: Starting 1 filereader instances
82.490: Running...
262.505: Run took 180 seconds...
262.507: Per-Operation Breakdown
closefile4           318704ops     1770ops/s   0.0mb/s    0.003ms/op [0.001ms - 0.481ms]
readfile4            318704ops     1770ops/s  46.7mb/s    0.706ms/op [0.005ms - 259.203ms]
openfile4            318704ops     1770ops/s   0.0mb/s    0.022ms/op [0.005ms - 4.902ms]
closefile3           318704ops     1770ops/s   0.0mb/s    0.006ms/op [0.001ms - 5.498ms]
fsyncfile3           318704ops     1770ops/s   0.0mb/s    2.780ms/op [0.229ms - 491.932ms]
appendfilerand3      318705ops     1770ops/s  13.8mb/s    0.087ms/op [0.001ms - 211.750ms]
readfile3            318705ops     1770ops/s  46.6mb/s    0.751ms/op [0.005ms - 297.595ms]
openfile3            318705ops     1770ops/s   0.0mb/s    0.022ms/op [0.005ms - 3.804ms]
closefile2           318705ops     1770ops/s   0.0mb/s    0.006ms/op [0.001ms - 3.129ms]
fsyncfile2           318705ops     1770ops/s   0.0mb/s    2.901ms/op [0.814ms - 491.883ms]
appendfilerand2      318711ops     1770ops/s  13.8mb/s    0.272ms/op [0.001ms - 208.355ms]
createfile2          318711ops     1770ops/s   0.0mb/s    0.671ms/op [0.031ms - 491.165ms]
deletefile1          318717ops     1771ops/s   0.0mb/s    0.672ms/op [0.043ms - 489.932ms]
262.507: IO Summary: 4143184 ops 23015.823 ops/s 3541/3541 rd/wr 121.0mb/s 0.685ms/op
262.507: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:262.507: IO Summary: 4143184 ops 23015.823 ops/s 3541/3541 rd/wr 121.0mb/s 0.685ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:225.709: IO Summary: 7613367 ops 42292.630 ops/s 3845/7690 rd/wr 1013.3mb/s 1.112ms/op
Filebench /tmp/filebench/oltp.f:239.447: IO Summary: 8423544 ops 46786.679 ops/s 23338/23210 rd/wr  92.4mb/s 0.426ms/op
Filebench /tmp/filebench/varmail.f:262.507: IO Summary: 4143184 ops 23015.823 ops/s 3541/3541 rd/wr 121.0mb/s 0.685ms/op
