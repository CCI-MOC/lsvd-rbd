+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
===Starting client benchmark

+ printf '===Starting client benchmark\n\n'
+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
Using device /dev/nvme1n1
+ dev_name=/dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.348454 s, 301 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: f7328bbe-6225-4c7a-a370-c571416e6a1d
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.004: File-server Version 3.0 personality successfully loaded
0.004: Populating and pre-allocating filesets
0.263: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.264: Removing bigfileset tree (if exists)
0.266: Pre-allocating directories in bigfileset tree
0.663: Pre-allocating files in bigfileset tree
36.562: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
36.562: Population and pre-allocation of filesets completed
36.562: Starting 1 filereader instances
37.570: Running...
217.587: Run took 180 seconds...
217.592: Per-Operation Breakdown
statfile1            1252562ops     6958ops/s   0.0mb/s    0.012ms/op [0.004ms - 5.729ms]
deletefile1          1252561ops     6958ops/s   0.0mb/s    0.211ms/op [0.029ms - 73.445ms]
closefile3           1252564ops     6958ops/s   0.0mb/s    0.004ms/op [0.001ms - 34.603ms]
readfile1            1252565ops     6958ops/s 917.5mb/s    0.097ms/op [0.004ms - 58.082ms]
openfile2            1252565ops     6958ops/s   0.0mb/s    0.056ms/op [0.005ms - 38.064ms]
closefile2           1252565ops     6958ops/s   0.0mb/s    0.004ms/op [0.001ms - 2.090ms]
appendfilerand1      1252566ops     6958ops/s  54.4mb/s    0.419ms/op [0.001ms - 205.448ms]
openfile1            1252569ops     6958ops/s   0.0mb/s    0.060ms/op [0.007ms - 34.834ms]
closefile1           1252569ops     6958ops/s   0.0mb/s    0.006ms/op [0.001ms - 5.780ms]
wrtfile1             1252573ops     6958ops/s 870.6mb/s    5.541ms/op [0.013ms - 208.943ms]
createfile1          1252612ops     6958ops/s   0.0mb/s    0.124ms/op [0.024ms - 54.717ms]
217.592: IO Summary: 13778271 ops 76539.422 ops/s 6958/13916 rd/wr 1842.5mb/s 0.594ms/op
217.592: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:217.592: IO Summary: 13778271 ops 76539.422 ops/s 6958/13916 rd/wr 1842.5mb/s 0.594ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: OLTP Version 3.0  personality successfully loaded
0.002: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.005: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.176: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.176: Removing datafiles tree (if exists)
0.179: Pre-allocating directories in datafiles tree
0.179: Pre-allocating files in datafiles tree
37.519: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
37.519: Population and pre-allocation of filesets completed
37.519: Starting 200 shadow instances
37.648: Starting 10 dbwr instances
37.656: Starting 1 lgwr instances
38.659: Running...
218.706: Run took 180 seconds...
218.724: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     4904000ops    27238ops/s   0.0mb/s    5.873ms/op [0.019ms - 347.249ms]
shadow-post-lg       4904200ops    27239ops/s   0.0mb/s    0.071ms/op [0.002ms - 64.044ms]
shadowhog            4904200ops    27239ops/s   0.0mb/s    0.317ms/op [0.091ms - 118.902ms]
shadowread           4929800ops    27381ops/s  53.2mb/s    0.978ms/op [0.001ms - 140.755ms]
dbwr-aiowait         49032ops      272ops/s   0.0mb/s    2.278ms/op [0.005ms - 53.356ms]
dbwr-block           49034ops      272ops/s   0.0mb/s   17.935ms/op [0.003ms - 62.285ms]
dbwr-hog             49042ops      272ops/s   0.0mb/s    0.011ms/op [0.004ms - 21.224ms]
dbwrite-a            4905480ops    27246ops/s  53.2mb/s    0.004ms/op [0.000ms - 57.619ms]
lg-block             1532ops        9ops/s   0.0mb/s  117.422ms/op [30.151ms - 712.998ms]
lg-aiowait           1533ops        9ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.024ms]
lg-write             1534ops        9ops/s   2.1mb/s    0.009ms/op [0.001ms - 0.113ms]
218.724: IO Summary: 9887379 ops 54916.391 ops/s 27381/27254 rd/wr 108.5mb/s 0.501ms/op
218.724: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:218.724: IO Summary: 9887379 ops 54916.391 ops/s 27381/27254 rd/wr 108.5mb/s 0.501ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: Varmail Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.951: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
0.951: Removing bigfileset tree (if exists)
0.954: Pre-allocating directories in bigfileset tree
0.954: Pre-allocating files in bigfileset tree
76.960: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
76.960: Population and pre-allocation of filesets completed
76.960: Starting 1 filereader instances
77.964: Running...
257.980: Run took 180 seconds...
257.982: Per-Operation Breakdown
closefile4           359805ops     1999ops/s   0.0mb/s    0.003ms/op [0.001ms - 1.172ms]
readfile4            359805ops     1999ops/s  51.8mb/s    0.598ms/op [0.005ms - 68.095ms]
openfile4            359806ops     1999ops/s   0.0mb/s    0.022ms/op [0.005ms - 2.457ms]
closefile3           359806ops     1999ops/s   0.0mb/s    0.006ms/op [0.001ms - 4.736ms]
fsyncfile3           359807ops     1999ops/s   0.0mb/s    2.493ms/op [0.566ms - 211.269ms]
appendfilerand3      359809ops     1999ops/s  15.6mb/s    0.098ms/op [0.007ms - 11.781ms]
readfile3            359809ops     1999ops/s  51.9mb/s    0.644ms/op [0.005ms - 208.172ms]
openfile3            359809ops     1999ops/s   0.0mb/s    0.022ms/op [0.005ms - 6.112ms]
closefile2           359809ops     1999ops/s   0.0mb/s    0.006ms/op [0.001ms - 2.684ms]
fsyncfile2           359809ops     1999ops/s   0.0mb/s    2.601ms/op [0.781ms - 210.950ms]
appendfilerand2      359814ops     1999ops/s  15.6mb/s    0.238ms/op [0.014ms - 36.969ms]
createfile2          359817ops     1999ops/s   0.0mb/s    0.543ms/op [0.032ms - 207.453ms]
deletefile1          359818ops     1999ops/s   0.0mb/s    0.592ms/op [0.032ms - 207.437ms]
257.982: IO Summary: 4677522 ops 25983.964 ops/s 3998/3998 rd/wr 135.0mb/s 0.605ms/op
257.982: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:257.982: IO Summary: 4677522 ops 25983.964 ops/s 3998/3998 rd/wr 135.0mb/s 0.605ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:217.592: IO Summary: 13778271 ops 76539.422 ops/s 6958/13916 rd/wr 1842.5mb/s 0.594ms/op
Filebench /tmp/filebench/oltp.f:218.724: IO Summary: 9887379 ops 54916.391 ops/s 27381/27254 rd/wr 108.5mb/s 0.501ms/op
Filebench /tmp/filebench/varmail.f:257.982: IO Summary: 4677522 ops 25983.964 ops/s 3998/3998 rd/wr 135.0mb/s 0.605ms/op
