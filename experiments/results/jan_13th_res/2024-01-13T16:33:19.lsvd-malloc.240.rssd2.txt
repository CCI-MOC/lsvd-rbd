+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
+ printf '===Starting client benchmark\n\n'
===Starting client benchmark

+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
Using device /dev/nvme1n1
+ dev_name=/dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.343062 s, 306 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: 4449630d-68e8-4724-91a7-d138005805a2
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.013: File-server Version 3.0 personality successfully loaded
0.013: Populating and pre-allocating filesets
0.222: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.222: Removing bigfileset tree (if exists)
0.225: Pre-allocating directories in bigfileset tree
0.617: Pre-allocating files in bigfileset tree
37.871: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
37.871: Population and pre-allocation of filesets completed
37.871: Starting 1 filereader instances
38.879: Running...
218.895: Run took 180 seconds...
218.901: Per-Operation Breakdown
statfile1            1176054ops     6533ops/s   0.0mb/s    0.012ms/op [0.004ms - 11.294ms]
deletefile1          1176055ops     6533ops/s   0.0mb/s    0.207ms/op [0.029ms - 71.168ms]
closefile3           1176056ops     6533ops/s   0.0mb/s    0.004ms/op [0.001ms - 7.363ms]
readfile1            1176057ops     6533ops/s 860.1mb/s    0.097ms/op [0.005ms - 40.323ms]
openfile2            1176057ops     6533ops/s   0.0mb/s    0.056ms/op [0.006ms - 269.317ms]
closefile2           1176057ops     6533ops/s   0.0mb/s    0.004ms/op [0.001ms - 11.384ms]
appendfilerand1      1176057ops     6533ops/s  51.0mb/s    0.436ms/op [0.001ms - 203.041ms]
openfile1            1176063ops     6533ops/s   0.0mb/s    0.060ms/op [0.007ms - 269.772ms]
closefile1           1176063ops     6533ops/s   0.0mb/s    0.006ms/op [0.001ms - 7.776ms]
wrtfile1             1176065ops     6533ops/s 817.4mb/s    5.993ms/op [0.013ms - 206.470ms]
createfile1          1176104ops     6533ops/s   0.0mb/s    0.119ms/op [0.023ms - 269.335ms]
218.901: IO Summary: 12936688 ops 71864.196 ops/s 6533/13066 rd/wr 1728.5mb/s 0.636ms/op
218.901: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:218.901: IO Summary: 12936688 ops 71864.196 ops/s 6533/13066 rd/wr 1728.5mb/s 0.636ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: OLTP Version 3.0  personality successfully loaded
0.003: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.006: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.163: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.163: Removing datafiles tree (if exists)
0.166: Pre-allocating directories in datafiles tree
0.166: Pre-allocating files in datafiles tree
37.098: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
37.098: Population and pre-allocation of filesets completed
37.098: Starting 200 shadow instances
37.228: Starting 10 dbwr instances
37.233: Starting 1 lgwr instances
38.236: Running...
218.288: Run took 180 seconds...
218.313: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     4545000ops    25243ops/s   0.0mb/s    6.305ms/op [0.018ms - 408.918ms]
shadow-post-lg       4545200ops    25244ops/s   0.0mb/s    0.076ms/op [0.002ms - 54.138ms]
shadowhog            4545200ops    25244ops/s   0.0mb/s    0.334ms/op [0.091ms - 84.291ms]
shadowread           4570800ops    25386ops/s  49.3mb/s    1.102ms/op [0.001ms - 214.946ms]
dbwr-aiowait         45448ops      252ops/s   0.0mb/s    2.178ms/op [0.004ms - 63.252ms]
dbwr-block           45448ops      252ops/s   0.0mb/s   19.329ms/op [0.003ms - 66.120ms]
dbwr-hog             45457ops      252ops/s   0.0mb/s    0.010ms/op [0.004ms - 10.050ms]
dbwrite-a            4547080ops    25255ops/s  49.3mb/s    0.003ms/op [0.000ms - 50.342ms]
lg-block             1420ops        8ops/s   0.0mb/s  126.694ms/op [36.188ms - 832.344ms]
lg-aiowait           1421ops        8ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.043ms]
lg-write             1422ops        8ops/s   2.0mb/s    0.009ms/op [0.001ms - 0.104ms]
218.313: IO Summary: 9166171 ops 50909.168 ops/s 25386/25263 rd/wr 100.6mb/s 0.562ms/op
218.313: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:218.313: IO Summary: 9166171 ops 50909.168 ops/s 25386/25263 rd/wr 100.6mb/s 0.562ms/op


===Filebench: workload=/tmp/filebench/randomwrite.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: Latency histogram enabled
0.002: Random Write Version 3.0 personality successfully loaded
0.002: Populating and pre-allocating filesets
0.002: Removing largefile1 tree (if exists)
0.005: Pre-allocating directories in largefile1 tree
0.005: Pre-allocating files in largefile1 tree
4.344: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
4.344: Population and pre-allocation of filesets completed
4.345: Starting 1 rand-write instances
5.347: Running...
185.364: Run took 180 seconds...
185.364: Per-Operation Breakdown
rand-write1          26607611ops   147806ops/s 1154.7mb/s    0.005ms/op [0.001ms - 176.893ms]	[ 0 0 0 0 0 0 0 0 0 0 650 33073 9697628 16743788 77240 45695 7363 943 31 1077 35 18 12 21 28 2 4 2 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ]
185.364: IO Summary: 26607611 ops 147806.320 ops/s 0/147806 rd/wr 1154.7mb/s 0.005ms/op
185.364: Shutting down processes

RESULT: Filebench /tmp/filebench/randomwrite.f:185.364: IO Summary: 26607611 ops 147806.320 ops/s 0/147806 rd/wr 1154.7mb/s 0.005ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.005: Varmail Version 3.0 personality successfully loaded
0.005: Populating and pre-allocating filesets
1.060: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
1.060: Removing bigfileset tree (if exists)
1.063: Pre-allocating directories in bigfileset tree
1.063: Pre-allocating files in bigfileset tree
77.749: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
77.749: Population and pre-allocation of filesets completed
77.750: Starting 1 filereader instances
78.756: Running...
258.772: Run took 180 seconds...
258.772: Per-Operation Breakdown
closefile4           376182ops     2090ops/s   0.0mb/s    0.003ms/op [0.001ms - 1.781ms]
readfile4            376182ops     2090ops/s  53.9mb/s    0.570ms/op [0.005ms - 77.719ms]
openfile4            376185ops     2090ops/s   0.0mb/s    0.022ms/op [0.005ms - 10.474ms]
closefile3           376185ops     2090ops/s   0.0mb/s    0.006ms/op [0.001ms - 3.123ms]
fsyncfile3           376185ops     2090ops/s   0.0mb/s    2.365ms/op [0.160ms - 209.297ms]
appendfilerand3      376188ops     2090ops/s  16.3mb/s    0.106ms/op [0.007ms - 28.904ms]
readfile3            376190ops     2090ops/s  54.0mb/s    0.613ms/op [0.004ms - 77.897ms]
openfile3            376191ops     2090ops/s   0.0mb/s    0.022ms/op [0.005ms - 9.548ms]
closefile2           376191ops     2090ops/s   0.0mb/s    0.006ms/op [0.001ms - 4.481ms]
fsyncfile2           376191ops     2090ops/s   0.0mb/s    2.461ms/op [0.651ms - 209.851ms]
appendfilerand2      376195ops     2090ops/s  16.3mb/s    0.243ms/op [0.015ms - 77.959ms]
createfile2          376195ops     2090ops/s   0.0mb/s    0.514ms/op [0.030ms - 209.795ms]
deletefile1          376195ops     2090ops/s   0.0mb/s    0.583ms/op [0.044ms - 209.504ms]
258.772: IO Summary: 4890455 ops 27166.966 ops/s 4180/4180 rd/wr 140.6mb/s 0.578ms/op
258.772: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:258.772: IO Summary: 4890455 ops 27166.966 ops/s 4180/4180 rd/wr 140.6mb/s 0.578ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:218.901: IO Summary: 12936688 ops 71864.196 ops/s 6533/13066 rd/wr 1728.5mb/s 0.636ms/op
Filebench /tmp/filebench/oltp.f:218.313: IO Summary: 9166171 ops 50909.168 ops/s 25386/25263 rd/wr 100.6mb/s 0.562ms/op
Filebench /tmp/filebench/randomwrite.f:185.364: IO Summary: 26607611 ops 147806.320 ops/s 0/147806 rd/wr 1154.7mb/s 0.005ms/op
Filebench /tmp/filebench/varmail.f:258.772: IO Summary: 4890455 ops 27166.966 ops/s 4180/4180 rd/wr 140.6mb/s 0.578ms/op
