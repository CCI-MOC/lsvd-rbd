+ for pair in $*
+ '[' 10.1.0.5 '!=' gw_ip=10.1.0.5 ']'
+ eval gw_ip=10.1.0.5
++ gw_ip=10.1.0.5
+ for pair in $*
+ '[' 0 '!=' read_entire_img=0 ']'
+ eval read_entire_img=0
++ read_entire_img=0
===Starting client benchmark

+ printf '===Starting client benchmark\n\n'
+ trap 'umount /mnt/fsbench || true; nvme disconnect -n nqn.2016-06.io.spdk:cnode1 || true; exit' SIGINT SIGTERM SIGHUP EXIT
+ modprobe nvme-fabrics
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode1
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode2
NQN:nqn.2016-06.io.spdk:cnode2 disconnected 0 controller(s)
+ nvme disconnect -n nqn.2016-06.io.spdk:cnode3
NQN:nqn.2016-06.io.spdk:cnode3 disconnected 0 controller(s)
+ gw_ip=10.1.0.5
+ nvme connect -t tcp --traddr 10.1.0.5 -s 9922 -n nqn.2016-06.io.spdk:cnode1 -o normal
device: nvme1
+ sleep 5
+ nvme list
Node                  SN                   Model                                    Namespace Usage                      Format           FW Rev  
--------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------
/dev/nvme0n1          PHM27522000B480BGN   INTEL SSDPE21D480GA                      1         480.10  GB / 480.10  GB    512   B +  0 B   E2010414
/dev/nvme1n1          SPDK00000000000001   SPDK_Controller1                         1          85.90  GB /  85.90  GB      4 KiB +  0 B   23.09   
++ nvme list
++ perl -lane 'print @F[0] if /SPDK/'
+ dev_name=/dev/nvme1n1
Using device /dev/nvme1n1
+ printf 'Using device /dev/nvme1n1\n'
+ num_fio_processes=1
+ fio_size=80GiB
+ read_entire_img=0
+ [[ 0 -eq 1 ]]
+ set +x
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 0.473188 s, 222 MB/s
umount: /mnt/fsbench: not mounted.

==== Creating filesystem ====
mke2fs 1.46.5 (30-Dec-2021)
Creating filesystem with 20971520 4k blocks and 5242880 inodes
Filesystem UUID: ac94220b-9ba3-465d-b303-8dbff2cbed0e
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000

Allocating group tables:   0/640       done                            
Writing inode tables:   0/640       done                            
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information:   0/640       done



=========================================
=== Running filebench workloads       ===
=========================================




===Filebench: workload=/tmp/filebench/fileserver.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: File-server Version 3.0 personality successfully loaded
0.003: Populating and pre-allocating filesets
0.207: bigfileset populated: 200000 files, avg. dir. width = 20, avg. dir. depth = 4.1, 0 leafdirs, 25028.705MB total size
0.207: Removing bigfileset tree (if exists)
0.209: Pre-allocating directories in bigfileset tree
0.603: Pre-allocating files in bigfileset tree
44.889: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
44.889: Population and pre-allocation of filesets completed
44.889: Starting 1 filereader instances
45.897: Running...
225.915: Run took 180 seconds...
225.920: Per-Operation Breakdown
statfile1            715204ops     3973ops/s   0.0mb/s    0.012ms/op [0.003ms - 9.187ms]
deletefile1          715204ops     3973ops/s   0.0mb/s    0.285ms/op [0.032ms - 544.045ms]
closefile3           715206ops     3973ops/s   0.0mb/s    0.004ms/op [0.001ms - 2.070ms]
readfile1            715206ops     3973ops/s 519.4mb/s    0.114ms/op [0.005ms - 519.012ms]
openfile2            715206ops     3973ops/s   0.0mb/s    0.046ms/op [0.006ms - 34.267ms]
closefile2           715206ops     3973ops/s   0.0mb/s    0.004ms/op [0.001ms - 5.887ms]
appendfilerand1      715206ops     3973ops/s  31.0mb/s    0.805ms/op [0.001ms - 537.387ms]
openfile1            715212ops     3973ops/s   0.0mb/s    0.051ms/op [0.007ms - 33.226ms]
closefile1           715212ops     3973ops/s   0.0mb/s    0.006ms/op [0.001ms - 33.908ms]
wrtfile1             715212ops     3973ops/s 497.0mb/s   10.536ms/op [0.013ms - 281.577ms]
createfile1          715254ops     3973ops/s   0.0mb/s    0.153ms/op [0.025ms - 509.436ms]
225.920: IO Summary: 7867328 ops 43703.243 ops/s 3973/7946 rd/wr 1047.4mb/s 1.092ms/op
225.920: Shutting down processes

RESULT: Filebench /tmp/filebench/fileserver.f:225.920: IO Summary: 7867328 ops 43703.243 ops/s 3973/7946 rd/wr 1047.4mb/s 1.092ms/op


===Filebench: workload=/tmp/filebench/oltp.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.003: OLTP Version 3.0  personality successfully loaded
0.003: Populating and pre-allocating filesets
0.003: logfile populated: 1 files, avg. dir. width = 1024, avg. dir. depth = 0.0, 0 leafdirs, 100.000MB total size
0.003: Removing logfile tree (if exists)
0.006: Pre-allocating directories in logfile tree
0.006: Pre-allocating files in logfile tree
0.116: datafiles populated: 250 files, avg. dir. width = 1024, avg. dir. depth = 0.8, 0 leafdirs, 25000.000MB total size
0.116: Removing datafiles tree (if exists)
0.119: Pre-allocating directories in datafiles tree
0.119: Pre-allocating files in datafiles tree
57.126: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
57.126: Population and pre-allocation of filesets completed
57.126: Starting 200 shadow instances
57.244: Starting 10 dbwr instances
57.249: Starting 1 lgwr instances
58.253: Running...
238.303: Run took 180 seconds...
238.320: Per-Operation Breakdown
random-rate          0ops        0ops/s   0.0mb/s    0.000ms/op [0.000ms - 0.000ms]
shadow-post-dbwr     3952562ops    21953ops/s   0.0mb/s    7.511ms/op [0.019ms - 415.533ms]
shadow-post-lg       3952563ops    21953ops/s   0.0mb/s    0.077ms/op [0.002ms - 60.027ms]
shadowhog            3952586ops    21953ops/s   0.0mb/s    0.334ms/op [0.091ms - 94.087ms]
shadowread           3978261ops    22096ops/s  42.9mb/s    1.068ms/op [0.001ms - 265.326ms]
dbwr-aiowait         39515ops      219ops/s   0.0mb/s    2.047ms/op [0.004ms - 52.195ms]
dbwr-block           39518ops      219ops/s   0.0mb/s   21.299ms/op [0.003ms - 395.532ms]
dbwr-hog             39525ops      220ops/s   0.0mb/s    0.009ms/op [0.004ms - 6.231ms]
dbwrite-a            3953780ops    21960ops/s  42.9mb/s    0.003ms/op [0.000ms - 58.960ms]
lg-block             1235ops        7ops/s   0.0mb/s  145.699ms/op [33.998ms - 960.116ms]
lg-aiowait           1236ops        7ops/s   0.0mb/s    0.001ms/op [0.001ms - 0.039ms]
lg-write             1237ops        7ops/s   1.7mb/s    0.009ms/op [0.001ms - 0.081ms]
238.320: IO Summary: 7974029 ops 44288.291 ops/s 22096/21966 rd/wr  87.5mb/s 0.545ms/op
238.320: Shutting down processes

RESULT: Filebench /tmp/filebench/oltp.f:238.320: IO Summary: 7974029 ops 44288.291 ops/s 22096/21966 rd/wr  87.5mb/s 0.545ms/op


===Filebench: workload=/tmp/filebench/varmail.f===

Filebench Version 1.5-alpha3
0.000: Allocated 177MB of shared memory
0.002: Varmail Version 3.0 personality successfully loaded
0.002: Populating and pre-allocating filesets
0.700: bigfileset populated: 900000 files, avg. dir. width = 1000000, avg. dir. depth = 1.0, 0 leafdirs, 28154.289MB total size
0.700: Removing bigfileset tree (if exists)
0.703: Pre-allocating directories in bigfileset tree
0.703: Pre-allocating files in bigfileset tree
73.980: Waiting for pre-allocation to finish (in case of a parallel pre-allocation)
73.980: Population and pre-allocation of filesets completed
73.981: Starting 1 filereader instances
74.985: Running...
255.000: Run took 180 seconds...
255.001: Per-Operation Breakdown
closefile4           309283ops     1718ops/s   0.0mb/s    0.003ms/op [0.001ms - 0.417ms]
readfile4            309283ops     1718ops/s  45.5mb/s    0.768ms/op [0.005ms - 340.242ms]
openfile4            309283ops     1718ops/s   0.0mb/s    0.021ms/op [0.005ms - 3.458ms]
closefile3           309283ops     1718ops/s   0.0mb/s    0.006ms/op [0.001ms - 6.191ms]
fsyncfile3           309284ops     1718ops/s   0.0mb/s    2.852ms/op [0.594ms - 601.335ms]
appendfilerand3      309288ops     1718ops/s  13.4mb/s    0.075ms/op [0.007ms - 95.809ms]
readfile3            309288ops     1718ops/s  45.5mb/s    0.819ms/op [0.005ms - 309.871ms]
openfile3            309288ops     1718ops/s   0.0mb/s    0.021ms/op [0.005ms - 2.863ms]
closefile2           309288ops     1718ops/s   0.0mb/s    0.006ms/op [0.001ms - 9.444ms]
fsyncfile2           309291ops     1718ops/s   0.0mb/s    3.050ms/op [0.814ms - 602.615ms]
appendfilerand2      309299ops     1718ops/s  13.4mb/s    0.267ms/op [0.001ms - 599.604ms]
createfile2          309299ops     1718ops/s   0.0mb/s    0.650ms/op [0.031ms - 402.759ms]
deletefile1          309299ops     1718ops/s   0.0mb/s    0.639ms/op [0.041ms - 598.356ms]
255.001: IO Summary: 4020756 ops 22335.647 ops/s 3436/3436 rd/wr 117.8mb/s 0.706ms/op
255.001: Shutting down processes

RESULT: Filebench /tmp/filebench/varmail.f:255.001: IO Summary: 4020756 ops 22335.647 ops/s 3436/3436 rd/wr 117.8mb/s 0.706ms/op
NQN:nqn.2016-06.io.spdk:cnode1 disconnected 1 controller(s)
Filebench /tmp/filebench/fileserver.f:225.920: IO Summary: 7867328 ops 43703.243 ops/s 3973/7946 rd/wr 1047.4mb/s 1.092ms/op
Filebench /tmp/filebench/oltp.f:238.320: IO Summary: 7974029 ops 44288.291 ops/s 22096/21966 rd/wr  87.5mb/s 0.545ms/op
Filebench /tmp/filebench/varmail.f:255.001: IO Summary: 4020756 ops 22335.647 ops/s 3436/3436 rd/wr 117.8mb/s 0.706ms/op
