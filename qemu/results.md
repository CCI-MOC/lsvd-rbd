# Results for cloned VMs

A few notes:

* I don't really have an automated way of doing this yes, manually looking at
  timestamps in the kernel log for now
* Clones are done via `clone.py` script
* GC disabled on clones, to be implemented
* Measured as time from QEMU start to the login prompt appearing

Results:

* Cold: 7163 requests, 6.8 to 7.1 seconds, 39% hitrate, 1.4 read amp
* Warm: same requests, 6.2 to 6.4 seconds, 98.98% hitrate
* Both read about 190 MiB of data on startup
* The bottleneck is not disk performance, but mostly CPU
* Massive savings on cache space though

Cold: 6.96 6.84 7.15 6.99
Warm: 6.34 6.32 6.45 6.47 6.45

Warm boot latencies:

disk = b'nvme3c3n1'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 10       |                                        |
        16 -> 31         : 26       |                                        |
        32 -> 63         : 1409     |****************************************|
        64 -> 127        : 1090     |******************************          |
       128 -> 255        : 1077     |******************************          |
       256 -> 511        : 159      |****                                    |
       512 -> 1023       : 48       |*                                       |
      1024 -> 2047       : 37       |*                                       |
      2048 -> 4095       : 12       |                                        |

disk = b'nvme0n1'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 1        |********************                    |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 0        |                                        |
       256 -> 511        : 0        |                                        |
       512 -> 1023       : 2        |****************************************|

Cold:

disk = b'nvme0n1'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 5        |**                                      |
        64 -> 127        : 3        |*                                       |
       128 -> 255        : 0        |                                        |
       256 -> 511        : 9        |***                                     |
       512 -> 1023       : 39       |****************                        |
      1024 -> 2047       : 47       |********************                    |
      2048 -> 4095       : 92       |****************************************|
      4096 -> 8191       : 89       |**************************************  |
      8192 -> 16383      : 32       |*************                           |
     16384 -> 32767      : 3        |*                                       |

disk = b'nvme3c3n1'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 15       |                                        |
        16 -> 31         : 17       |                                        |
        32 -> 63         : 797      |****************************************|
        64 -> 127        : 500      |*************************               |
       128 -> 255        : 628      |*******************************         |
       256 -> 511        : 620      |*******************************         |
       512 -> 1023       : 673      |*********************************       |
      1024 -> 2047       : 613      |******************************          |
      2048 -> 4095       : 34       |*                                       |

Backend latencies:

disk = b'sda'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 6        |**************                          |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 9        |*********************                   |
       256 -> 511        : 17       |****************************************|
       512 -> 1023       : 9        |*********************                   |
      1024 -> 2047       : 2        |****                                    |
      2048 -> 4095       : 1        |**                                      |
      4096 -> 8191       : 2        |****                                    |
      8192 -> 16383      : 1        |**                                      |

disk = b'sdc'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 6        |********************                    |
        64 -> 127        : 0        |                                        |
       128 -> 255        : 4        |*************                           |
       256 -> 511        : 12       |****************************************|
       512 -> 1023       : 2        |******                                  |
      1024 -> 2047       : 6        |********************                    |
      2048 -> 4095       : 6        |********************                    |
      4096 -> 8191       : 2        |******                                  |
      8192 -> 16383      : 2        |******                                  |

disk = b'sdb'
     usecs               : count     distribution
         0 -> 1          : 0        |                                        |
         2 -> 3          : 0        |                                        |
         4 -> 7          : 0        |                                        |
         8 -> 15         : 0        |                                        |
        16 -> 31         : 0        |                                        |
        32 -> 63         : 7        |************                            |
        64 -> 127        : 1        |*                                       |
       128 -> 255        : 7        |************                            |
       256 -> 511        : 23       |****************************************|
       512 -> 1023       : 4        |******                                  |
      1024 -> 2047       : 0        |                                        |
      2048 -> 4095       : 1        |*                                       |
      4096 -> 8191       : 2        |***                                     |
      8192 -> 16383      : 1        |*                                       |
